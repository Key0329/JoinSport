import{F as z}from"./FrontHeader-63c40871.js";import{s as P,t as C,_ as w,u as O,r as m,o as _,a as b,b as r,d as f,B as M,F as V,A as W,w as g,e as x,H as q,f as J}from"./index-a122773d.js";import{m as A}from"./memberStore-e22f486b.js";import{j as R}from"./joinActivitiesStore-9da8b69a.js";import{c as j,D as Y,m as F,g as S,v as l,S as K,V as X,C as k,s as Q,i as Z,f as U,a as ee,b as te,N as se,d as ae,e as L,B,h as re,j as N,k as ne,l as G,E as ie,n as oe,o as le,p as T,q as de,r as ce,t as D,F as ue,u as fe}from"./zh-tw-62e194ed.js";import{_ as pe}from"./group07-9553d355.js";import{_ as me}from"./group03-b38e3255.js";import"./searchStore-a103fcec.js";const he={name:"MemberPanel",data(){return{userId:null}},computed:{...P(A,["user"])},methods:{...C(O,["getUserId"]),...C(A,["getMemberData"])},mounted(){this.userId=this.getUserId(),this.getMemberData(this.userId)}},ve={class:"rounded-lg bg-primary-03 px-10 py-6"},ge={class:"mb-8 flex items-center gap-6"},_e={class:"text-xl"},xe={class:"text-sm"},ye={class:"flex flex-wrap gap-2"},be=r("i",{class:"pi pi-tag mr-1"},null,-1);function we(t,e,s,a,n,o){const i=m("PAvatar"),d=m("RouterLink");return _(),b("div",ve,[r("div",ge,[f(i,{image:t.user.img,size:"xlarge",shape:"circle"},null,8,["image"]),r("div",null,[r("h3",_e,M(t.user.name),1),r("span",xe,M(t.user.email),1)])]),r("ul",ye,[(_(!0),b(V,null,W(t.user.favoriteSports,c=>(_(),b("li",{key:"tag"+c},[f(d,{to:`/joinList/search/text=${c}&area=0&date=0&page=1`,class:"tag flex items-center"},{default:g(()=>[be,x(" "+M(c),1)]),_:2},1032,["to"])]))),128))])])}const De=w(he,[["render",we]]),Se={name:"PanelMenu",data(){return{items:[{label:"我的揪團",icon:"pi pi-fw pi-calendar",items:[{label:"我參加的揪團",icon:"pi pi-fw pi-users",to:"/Member/List"},{label:"我主持的揪團",icon:"pi pi-fw pi-key",to:"/Member/Host"},{label:"已收藏的揪團",icon:"pi pi-fw pi-heart",to:"/Member/Collection"}]},{label:"我的資訊",icon:"pi pi-fw pi-user",items:[{label:"個人資訊",icon:"pi pi-fw pi-align-left",to:"/Member/Info"},{label:"個人標籤",icon:"pi pi-fw pi-id-card",to:"/Member/Tags"}]}]}}};function Ce(t,e,s,a,n,o){const i=m("PanelMenu",!0);return _(),q(i,{model:n.items},null,8,["model"])}const $e=w(Se,[["render",Ce]]);class Ie extends B{constructor(){super(...arguments),this.state={textId:S()}}render(){let{theme:e,dateEnv:s,options:a,viewApi:n}=this.context,{cellId:o,dayDate:i,todayRange:d}=this.props,{textId:c}=this.state,u=re(i,d),p=a.listDayFormat?s.format(i,a.listDayFormat):"",h=a.listDaySideFormat?s.format(i,a.listDaySideFormat):"",v=Object.assign({date:s.toDate(i),view:n,textId:c,text:p,sideText:h,navLinkAttrs:N(this.context,i),sideNavLinkAttrs:N(this.context,i,"day",!1)},u);return l(k,{elTag:"tr",elClasses:["fc-list-day",...ne(u,e)],elAttrs:{"data-date":U(i)},renderProps:v,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:Me,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},y=>l("th",{scope:"colgroup",colSpan:3,id:o,"aria-labelledby":c},l(y,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function Me(t){return l(G,null,t.text&&l("a",Object.assign({id:t.textId,className:"fc-list-day-text"},t.navLinkAttrs),t.text),t.sideText&&l("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},t.sideNavLinkAttrs),t.sideText))}const Te=j({hour:"numeric",minute:"2-digit",meridiem:"short"});class ke extends B{render(){let{props:e,context:s}=this,{options:a}=s,{seg:n,timeHeaderId:o,eventHeaderId:i,dateHeaderId:d}=e,c=a.eventTimeFormat||Te;return l(ie,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",n.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>Ee(n,s),seg:n,timeText:"",disableDragging:!0,disableResizing:!0}),(u,p)=>l(G,null,Ae(n,c,s,o,d),l("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},l("span",{className:"fc-list-event-dot",style:{borderColor:p.borderColor||p.backgroundColor}})),l(u,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${i} ${d}`}})))}}function Ee(t,e){let s=oe(t,e);return l("a",Object.assign({},s),t.eventRange.def.title)}function Ae(t,e,s,a,n){let{options:o}=s;if(o.displayEventTime!==!1){let i=t.eventRange.def,d=t.eventRange.instance,c=!1,u;if(i.allDay?c=!0:le(t.eventRange.range)?t.isStart?u=T(t,e,s,null,null,d.range.start,t.end):t.isEnd?u=T(t,e,s,null,null,t.start,d.range.end):c=!0:u=T(t,e,s),c){let p={text:s.options.allDayText,view:s.viewApi};return l(k,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${a} ${n}`},renderProps:p,generatorName:"allDayContent",customGenerator:o.allDayContent,defaultGenerator:Re,classNameGenerator:o.allDayClassNames,didMount:o.allDayDidMount,willUnmount:o.allDayWillUnmount})}return l("td",{className:"fc-list-event-time"},u)}return null}function Re(t){return t.text}class Fe extends Y{constructor(){super(...arguments),this.computeDateVars=F(Ne),this.eventStoreToSegs=F(this._eventStoreToSegs),this.state={timeHeaderId:S(),eventHeaderId:S(),dateHeaderIdRoot:S()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:s}=this,{dayDates:a,dayRanges:n}=this.computeDateVars(e.dateProfile),o=this.eventStoreToSegs(e.eventStore,e.eventUiBases,n);return l(X,{elRef:this.setRootEl,elClasses:["fc-list",s.theme.getClass("table"),s.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:s.viewSpec},l(K,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},o.length>0?this.renderSegList(o,a):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:s}=this.context,a={text:e.noEventsText,view:s};return l(k,{elTag:"div",elClasses:["fc-list-empty"],renderProps:a,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:Le,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},n=>l(n,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,s){let{theme:a,options:n}=this.context,{timeHeaderId:o,eventHeaderId:i,dateHeaderIdRoot:d}=this.state,c=He(e);return l(se,{unit:"day"},(u,p)=>{let h=[];for(let v=0;v<c.length;v+=1){let y=c[v];if(y){let $=U(s[v]),E=d+"-"+$;h.push(l(Ie,{key:$,cellId:E,dayDate:s[v],todayRange:p})),y=ee(y,n.eventOrder);for(let I of y)h.push(l(ke,Object.assign({key:$+":"+I.eventRange.instance.instanceId,seg:I,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:o,eventHeaderId:i,dateHeaderId:E},te(I,p,u))))}}return l("table",{className:"fc-list-table "+a.getClass("table")},l("thead",null,l("tr",null,l("th",{scope:"col",id:o},n.timeHint),l("th",{scope:"col","aria-hidden":!0}),l("th",{scope:"col",id:i},n.eventHint))),l("tbody",null,h))})}_eventStoreToSegs(e,s,a){return this.eventRangesToSegs(Q(e,s,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,a)}eventRangesToSegs(e,s){let a=[];for(let n of e)a.push(...this.eventRangeToSegs(n,s));return a}eventRangeToSegs(e,s){let{dateEnv:a}=this.context,{nextDayThreshold:n}=this.context.options,o=e.range,i=e.def.allDay,d,c,u,p=[];for(d=0;d<s.length;d+=1)if(c=Z(o,s[d]),c&&(u={component:this,eventRange:e,start:c.start,end:c.end,isStart:e.isStart&&c.start.valueOf()===o.start.valueOf(),isEnd:e.isEnd&&c.end.valueOf()===o.end.valueOf(),dayIndex:d},p.push(u),!u.isEnd&&!i&&d+1<s.length&&o.end<a.add(s[d+1].start,n))){u.end=o.end,u.isEnd=!0;break}return p}}function Le(t){return t.text}function Ne(t){let e=ae(t.renderRange.start),s=t.renderRange.end,a=[],n=[];for(;e<s;)a.push(e),n.push({start:e,end:L(e,1)}),e=L(e,1);return{dayDates:a,dayRanges:n}}function He(t){let e=[],s,a;for(s=0;s<t.length;s+=1)a=t[s],(e[a.dayIndex]||(e[a.dayIndex]=[])).push(a);return e}const Pe={listDayFormat:H,listDaySideFormat:H,noEventsClassNames:D,noEventsContent:D,noEventsDidMount:D,noEventsWillUnmount:D};function H(t){return t===!1?null:j(t)}var Oe=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';de(Oe);var Ve=ce({name:"@fullcalendar/list",optionRefiners:Pe,views:{list:{component:Fe,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const je={name:"FullCalendarList",components:{FullCalendar:ue},data(){return{calendarOptions:{plugins:[Ve],initialView:"listWeek",weekends:!0,locale:fe,headerToolbar:{left:"",center:"",right:""},eventDidMount:t=>{if(t.event.extendedProps.status==="done"){const e=t.el.style;e.backgroundColor="#faede2",e.textDecoration="line-through";const s=t.el.getElementsByClassName("fc-list-event-dot")[0];s&&(s.style.borderColor="#f1675d")}},eventClick:t=>{this.$router.push(`/JoinDetail/id=${t.event.id}`)},events:[{title:"開會",start:new Date},{title:"打球",start:"2023-03-10T14:30:00",extendedProps:{status:"done"}}],editable:!0}}},computed:{...P(R,["restructureActivitiesList"]),getMemberEvent(){const t=parseInt(this.getUserId(),10);return this.restructureActivitiesList.filter(a=>a.participantsId.includes(t)).map(a=>{var d;const n=`${a.originDate}T${(d=a.startTime)==null?void 0:d.time}:00`,o=new Date(n).getTime()-new Date().getTime()<0?"done":"";return{title:a.title,id:a.id,start:n,borderColor:"#36D488",extendedProps:{status:o}}})}},methods:{...C(R,["getActivities","getOrders"]),...C(O,["getUserId"])},watch:{getMemberEvent(t){this.calendarOptions.events=t}},mounted(){this.getActivities(),this.getOrders()}},Ue={class:"my-6"},Be=r("h3",{class:"text-lg"},"本周活動",-1),Ge=r("i",{class:"pi pi-arrow-up-right ml-1"},null,-1);function ze(t,e,s,a,n,o){const i=m("FullCalendar"),d=m("RouterLink");return _(),b("div",Ue,[Be,f(i,{options:n.calendarOptions},null,8,["options"]),f(d,{to:"/Member/Calendar",class:"mt-1 flex items-center justify-end hover:text-primary-01"},{default:g(()=>[x("詳細月曆"),Ge]),_:1})])}const We=w(je,[["render",ze]]),qe="/JoinSport/assets/group04-2b843bd7.png",Je="/JoinSport/assets/group05-fa5823cb.png",Ye={name:"ActivityPanel",components:{}},Ke={class:"flex flex-col gap-8 rounded-lg bg-primary-03 p-6"},Xe={class:"mb-4 flex items-center justify-between"},Qe=r("h5",null,"下一個活動",-1),Ze=r("div",{class:"relative flex w-full items-center p-2 pl-4 sm:w-1/2"},[r("img",{class:"rounded",src:pe,alt:"card-img-01"})],-1),et=r("div",{class:"w-full rounded-b-[10px] border-x border-b px-2 pt-2 pb-3 sm:border-0"},[r("h5",{class:"mb-2 group-hover:text-primary-01"}," 周末#羽球#新店運動中心 "),r("p",{class:"flex items-center text-sm text-[#3D3D3D]"},[r("span",{class:"material-icons mr-1 text-primary-01"}," room "),x("捷運新店區公所 ")]),r("p",{class:"mb-1 flex items-center text-sm text-[#3D3D3D]"},[r("span",{class:"material-icons mr-1 text-primary-01"}," schedule "),x("3/25 10:00 ")]),r("p",{class:"text-end text-xs"},"5 位參加者")],-1),tt={class:"mb-4 flex items-center justify-between"},st=r("h5",null,"您的群組",-1),at=r("div",{class:"flex flex-col items-center px-2 py-4"},[r("i",{class:"pi pi-users mb-2 text-xl"}),r("h5",{class:"mb-2"},"您還沒參加任何群組"),r("p",{class:"text-xs text-secondary-coffee group-hover:text-primary-01"}," 探索可能有興趣的群組 ")],-1),rt={class:"mb-4 flex items-center justify-between"},nt=r("h5",null,"您喜愛的運動",-1),it=J('<div class="grid grid-cols-3 gap-4 rounded-[10px] bg-white p-4 shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)]"><a href="#" class="relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-[&#39;健身&#39;]"><img class="h-full w-full rounded-lg" src="'+me+'" alt="favoriteSport"></a><a href="#" class="relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-[&#39;潛水&#39;]"><img class="h-full w-full rounded-lg" src="'+qe+'" alt="favoriteSport"></a><a href="#" class="relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-[&#39;籃球&#39;]"><img class="h-full w-full rounded-lg" src="'+Je+'" alt="favoriteSport"></a></div>',1);function ot(t,e,s,a,n,o){const i=m("RouterLink");return _(),b("div",Ke,[r("div",null,[r("div",Xe,[Qe,f(i,{to:"/Member/List",class:"text-sm text-[#3d3d3d] hover:text-primary-01"},{default:g(()=>[x("所有參加的活動")]),_:1})]),f(i,{to:"/Member/List",class:"group flex flex-col rounded-[10px] bg-white shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)] sm:flex-row"},{default:g(()=>[Ze,et]),_:1})]),r("div",null,[r("div",tt,[st,f(i,{to:"/Member/List",class:"text-sm text-[#3d3d3d] hover:text-primary-01"},{default:g(()=>[x("所有參加的群組")]),_:1})]),f(i,{to:"/Member/List",class:"group rounded-[10px] bg-white shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)]"},{default:g(()=>[at]),_:1})]),r("div",null,[r("div",rt,[nt,f(i,{to:"/Member/List",class:"text-sm text-[#3d3d3d] hover:text-primary-01"},{default:g(()=>[x("所有喜愛的運動")]),_:1})]),it])])}const lt=w(Ye,[["render",ot]]);const dt={name:"MemberView",components:{FrontHeader:z,MemberPanel:De,PanelMenu:$e,FullCalendarList:We,ActivityPanel:lt},data(){return{}}},ct={class:"pb-20 pt-[120px]"},ut={class:"container"},ft={class:"grid grid-cols-12"},pt={class:"col-span-4"},mt={class:"flex flex-col gap-4"},ht={class:"col-span-7 col-end-13"};function vt(t,e,s,a,n,o){const i=m("FrontHeader"),d=m("MemberPanel"),c=m("PanelMenu"),u=m("FullCalendarList"),p=m("ActivityPanel"),h=m("RouterView");return _(),b(V,null,[f(i),r("main",ct,[r("div",ut,[r("div",ft,[r("div",pt,[r("div",mt,[f(d),f(c),f(u),f(p)])]),r("div",ht,[f(h)])])])])],64)}const Ct=w(dt,[["render",vt],["__scopeId","data-v-e6799fe7"]]);export{Ct as default};
