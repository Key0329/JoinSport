import{_ as x,G as v,s as E,a as r,b as l,e as d,B as m,d as w,U as A,u as C,D as h,F as T,C as _,r as V,o as n,J as k,z as S,A as D}from"./index-56f709e6.js";import{t as b}from"./tagsStore-b386bc78.js";const{VITE_URL:y}={VITE_URL:"https://vercel.com/key0329/join-sport-server-vercel",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",VITE_MAP_KEY:"AIzaSyAScKOJBsEFvLrg4YGx5ticXsBzFYZPATw",VITE_MAP_URL:"https://maps.googleapis.com/maps/api/geocode/json",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},I={inject:["reload"],data(){return{tempSelectedTag:null,selectedTags:[],filteredTags:null,isDisabled:!0}},computed:{...v(b,["tags","tagList"])},methods:{...E(b,["getTags"]),searchTag(t){this.selectedTags.length<=4&&setTimeout(()=>{t.query.trim().length?this.filteredTags=this.tagList.filter(e=>e.label.toLowerCase().match(t.query.toLowerCase())):this.filteredTags=[...this.tagList]},250)},addTag(t){if(t.target.tagName==="BUTTON"){const o=t.target.textContent;this.selectedTags.push(o),this.tempSelectedTag="";return}const e=t.target.value;if(this.selectedTags.some(o=>o===e)){alert("已有相同標籤");return}if(e===""){alert("請輸入標籤內容");return}this.selectedTags.push(e),this.tempSelectedTag=""},removeTag(t){this.selectedTags.splice(t,1)},getActivity(){const{id:t}=this.$route.params,e=`${y}/activities/${t}`;this.$http.get(e).then(c=>{this.selectedTags=c.data.tags}).catch(c=>{console.log(c)})},updateActivityTags(){const{id:t}=this.$route.params,e=`${y}/activities/${t}`,c={tags:this.selectedTags};this.$http.patch(e,c).then(o=>{console.log(o.data),alert("修改成功"),this.isDisabled=!0}).catch(o=>{console.log(o)})},enableEdit(){this.isDisabled=!this.isDisabled},cancelEdit(){this.reload()}},mounted(){this.getActivity(),this.getTags()}},g=t=>(S("data-v-cbc96a75"),t=t(),D(),t),L={class:"py-10"},B={class:"mb-12 text-center text-xl"},U=g(()=>l("br",null,null,-1)),j={class:"text-primary-01"},M={class:"mb-10 flex flex-col items-center justify-center"},N={class:"mb-10 flex w-full items-center"},P=g(()=>l("i",{class:"pi pi-pencil ml-4 mr-1"},null,-1)),R={class:"flex flex-wrap gap-3"},z={class:"mr-8 text-lg"},F=g(()=>l("i",{class:"pi pi-tag mr-2"},null,-1)),K=["onClick"],O=g(()=>l("i",{class:"pi pi-times text-xs"},null,-1)),J=[O],Y={key:0,class:"mt-10 ml-auto flex gap-4"},q={class:"mb-10"},G=g(()=>l("h3",{class:"mb-4 ml-2 text-lg"},"Tags :",-1)),X={class:"flex flex-wrap"},H=["disabled"];function Z(t,e,c,o,a,i){const f=V("AutoComplete");return n(),r("section",L,[l("h2",B,[d(" 請盡量詳細地選擇，將會幫助您的揪團找到最適合的團員"),U,d("可以新增 "),l("strong",j,m(5-a.selectedTags.length),1),d(" 個標籤 ")]),l("div",M,[l("div",N,[w(f,{modelValue:a.tempSelectedTag,"onUpdate:modelValue":e[0]||(e[0]=s=>a.tempSelectedTag=s),suggestions:a.filteredTags,onComplete:e[1]||(e[1]=s=>i.searchTag(s)),onKeyup:e[2]||(e[2]=A(s=>i.addTag(s),["enter"])),optionLabel:"label",loadingIcon:"false",placeholder:"輸入適合揪團的標籤 ( 例如: 攀岩、潛水、戶外運動 )",disabled:a.selectedTags.length===5,class:"w-3/4"},null,8,["modelValue","suggestions","disabled"]),a.isDisabled===!0?(n(),r("button",{key:0,onClick:e[3]||(e[3]=C((...s)=>i.enableEdit&&i.enableEdit(...s),["prevent"])),class:"hover:text-primary-01"},[P,d(" 編輯標籤 ")])):h("",!0)]),l("ul",R,[(n(!0),r(T,null,_(a.selectedTags,(s,p)=>(n(),r("li",{class:"flex items-center rounded-full bg-secondary-yellow py-2 pl-8 pr-4",key:s+p},[l("span",z,[F,d(m(s),1)]),a.isDisabled?h("",!0):(n(),r("button",{key:0,type:"button",class:"flex h-5 w-5 items-center justify-center rounded-full bg-primary-03",onClick:u=>i.removeTag(p)},J,8,K))]))),128))]),a.isDisabled?h("",!0):(n(),r("div",Y,[l("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...s)=>i.updateActivityTags&&i.updateActivityTags(...s))}," 確認 "),l("button",{type:"button",onClick:e[5]||(e[5]=(...s)=>i.cancelEdit&&i.cancelEdit(...s)),class:"btn border border-primary-01 hover:bg-primary-01 hover:text-white"}," 取消 ")]))]),l("div",q,[G,l("ul",X,[(n(!0),r(T,null,_(t.tags,(s,p)=>(n(),r("li",{class:"flex items-center justify-center",key:s+p},[l("button",{class:k(["mb-2 mr-2 rounded-full bg-primary-02 px-8 py-2 hover:bg-primary-04",{hidden:a.selectedTags.some(u=>u===s),"cursor-not-allowed opacity-50":a.selectedTags.length===5}]),type:"button",disabled:a.selectedTags.length===5,onClick:e[6]||(e[6]=u=>i.addTag(u))},m(s),11,H)]))),128))])])])}const $=x(I,[["render",Z],["__scopeId","data-v-cbc96a75"]]);export{$ as default};
