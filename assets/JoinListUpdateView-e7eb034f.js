import{J as L}from"./JoinCardRow-6766207d.js";import{L as x}from"./LeafletMap-8b4ac6d1.js";import{_ as P,s as A,t as g,a as c,b as o,d as n,F as w,B as C,u as I,r as i,o as d,w as b}from"./index-827349da.js";import{j as u}from"./activitiesStore-a943a661.js";import{P as k}from"./PaginationComponent-0f60275f.js";import"./leaflet-src-73af3b31.js";const v={name:"JoinListUpdateView",components:{JoinCardRow:L,LeafletMap:x,PaginationComponent:k},data(){return{userId:null,currentPage:1}},computed:{...A(u,["availableActivities"]),hotActivitiesList:({availableActivities:s,arrangePage:l})=>{const p=s.filter(t=>t.isCancelled===!1).sort((t,a)=>{const r=new Date(t.updateDate).getTime();return new Date(a.updateDate).getTime()-r});return l(p)}},methods:{...g(u,["getOrders","getActivities","changePage","arrangePage"]),...g(I,["getUserId"])},watch:{$route(s){this.currentPage=s.params.page,this.changePage(s.params.page)}},mounted(){this.getActivities(),this.getOrders(),this.changePage(this.$route.params.page),this.userId=this.getUserId()}},B={class:"pt-4 pb-20 md:pt-10"},J={class:"container"},U=o("h2",{class:"mb-6 text-center text-2xl md:mb-10 md:text-start"},"最新揪團",-1),D={class:"grid md:grid-cols-12 lg:gap-0"},T={class:"col-span-7 flex flex-col gap-6"},j={class:"sticky top-[286px] col-span-4 col-end-13 hidden h-[400px] md:flex"};function V(s,l,_,p,t,a){const r=i("PaginationComponent"),m=i("join-card-row"),h=i("RouterLink"),f=i("LeafletMap");return d(),c("section",B,[o("div",J,[U,n(r,{currentPage:t.currentPage,pageTotal:a.hotActivitiesList.pageTotal,pageUrl:"/JoinList/Update/",class:"mb-4"},null,8,["currentPage","pageTotal"]),o("div",D,[o("ul",T,[(d(!0),c(w,null,C(a.hotActivitiesList.list,e=>(d(),c("li",{key:e==null?void 0:e.id},[n(h,{to:`/JoinDetail/id=${e==null?void 0:e.id}`},{default:b(()=>[n(m,{userId:t.userId,activity:e},null,8,["userId","activity"])]),_:2},1032,["to"])]))),128))]),o("aside",j,[n(f,{mapActivities:a.hotActivitiesList.list},null,8,["mapActivities"])])])])])}const $=P(v,[["render",V]]);export{$ as default};
