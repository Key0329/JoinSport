import{_ as c,o as d,a as k}from"./index-3e1b4187.js";const{VITE_URL:n}={VITE_URL:"https://joinsport-server-render.onrender.com",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",VITE_MAP_KEY:"AIzaSyAScKOJBsEFvLrg4YGx5ticXsBzFYZPATw",VITE_MAP_URL:"https://maps.googleapis.com/maps/api/geocode/json",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},h={props:{userId:{type:String},activity:{type:Object}},data(){return{bookmarkId:null,isBookmarked:!1}},methods:{getActivityBookmark(s){const e=`${n}/users/${this.userId}/bookmarks?activityId=${s}`;this.$http.get(e).then(t=>{t.data[0]&&(t.data[0].isCancelled===!1&&(this.isBookmarked=!0),this.bookmarkId=t.data[0].id)}).catch(t=>{const o=t.response.statusText;this.$toast.add({severity:"error",detail:`${o}'找不到收藏資料'`,life:3e3,contentStyleClass:"custom-toast-danger"})})},handleBookmark(){if(!this.bookmarkId&&this.isBookmarked===!1){const o=`${n}/bookmarks/`,i={userId:parseInt(this.userId,10),activityId:this.activity.id,isCancelled:!1};this.$http.post(o,i).then(a=>{this.isBookmarked=!0,this.bookmarkId=a.data.id}).catch(a=>{const r=a.response.statusText;this.$toast.add({severity:"error",detail:r,life:3e3,contentStyleClass:"custom-toast-danger"})});return}const s=this.bookmarkId,e=`${n}/bookmarks/${s}`,t={isCancelled:!1};this.isBookmarked===!0&&(t.isCancelled=!0),this.$http.patch(e,t).then(()=>{this.isBookmarked=!this.isBookmarked,this.isBookmarked===!0&&this.$toast.add({severity:"success",detail:"加入我的收藏",life:3e3}),this.isBookmarked===!1&&this.$toast.add({severity:"info",detail:"移除我的收藏",life:3e3})}).catch(o=>{const i=o.response.statusText;this.$toast.add({severity:"error",detail:i,life:3e3,contentStyleClass:"custom-toast-danger"})})}},watch:{activity(s){this.getActivityBookmark(s.id)}},mounted(){this.getActivityBookmark(this.activity.id)}},l={key:0,class:"pi pi-bookmark text-lg hover:text-primary-01"},m={key:1,class:"pi pi-bookmark-fill text-lg text-yellow-300 hover:text-primary-01"};function p(s,e,t,o,i,a){return d(),k("button",{type:"button",onClick:e[0]||(e[0]=(...r)=>a.handleBookmark&&a.handleBookmark(...r))},[i.isBookmarked?(d(),k("i",m)):(d(),k("i",l))])}const y=c(h,[["render",p]]);export{y as B};
