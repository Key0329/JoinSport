import{_ as V,s as g,t as c,a as l,d as o,b as s,v as b,G as n,C as v,x as f,e as I,F as D,u as S,r as d,o as m,D as w,E as M}from"./index-1742c032.js";import{u as k,r as h,e as x}from"./i18n-validators-1df3ab55.js";import{m as _}from"./memberStore-38429115.js";const N={name:"MemberInfoView",setup:()=>({v$:k()}),data(){return{userId:null,name:"",email:"",submitted:!1,isDisabled:!0}},computed:{...g(_,["user"])},validations(){return{name:{required:h},email:{required:h,email:x}}},methods:{...c(S,["getUserId"]),...c(_,["getMemberData","editMemberData"]),handleSubmit(e){if(this.submitted=!0,!e)return;const a={id:this.userId,email:this.email,name:this.name};this.editMemberData(a),this.$toast.add({severity:"success",detail:"修改成功",life:1e3}),this.isDisabled=!0},editName(){this.isDisabled=!1}},watch:{user(){this.name=this.user.name,this.email=this.user.email}},mounted(){const e=this.getUserId();this.getMemberData(e),this.userId=e}},u=e=>(w("data-v-eaf1f41e"),e=e(),M(),e),C=u(()=>s("h1",{class:"mb-10 text-xl md:text-4xl"},"編輯個人資訊",-1)),T={class:"mb-10 flex items-center"},P=u(()=>s("button",{type:"button",class:"btn btn-primary"},"變更頭像",-1)),U={class:"mb-6"},q={class:"flex flex-col"},A={key:0,class:"p-error"},B={class:"mb-6"},E={class:"flex flex-col"},z={key:0,class:"p-error"},F={class:"mt-10 flex justify-center"},j=u(()=>s("i",{class:"pi pi-pencil mr-1"},null,-1)),G={key:1,type:"submit",class:"btn btn-primary"};function H(e,a,J,K,t,r){const $=d("PToast"),y=d("PAvatar"),p=d("InputText");return m(),l(D,null,[o($),s("section",null,[C,s("div",T,[o(y,{image:e.user.img,size:"xlarge",class:"info-avatar mr-10 w-20",shape:"circle"},null,8,["image"]),P]),s("form",{onSubmit:a[3]||(a[3]=b(i=>r.handleSubmit(!e.v$.$invalid),["prevent"]))},[s("ul",null,[s("li",U,[s("div",q,[s("label",{for:"name",class:n(["mb-2 px-2",{"p-error":e.v$.name.$invalid&&t.submitted}])},"姓名",2),o(p,{id:"name",type:"text",modelValue:e.v$.name.$model,"onUpdate:modelValue":a[0]||(a[0]=i=>e.v$.name.$model=i),placeholder:"請輸入姓名",class:n(["mr-2 md:w-1/2",{"p-invalid":e.v$.name.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.name.$invalid&&t.submitted||e.v$.name.$pending.$response?(m(),l("small",A,v(e.v$.name.required.$message.replace("Value","姓名")),1)):f("",!0)]),s("li",B,[s("div",E,[s("label",{for:"email",class:n(["mb-2 px-2",{"p-error":e.v$.email.$invalid&&t.submitted}])},"電子信箱",2),o(p,{id:"accountEmail",type:"email",modelValue:e.v$.email.$model,"onUpdate:modelValue":a[1]||(a[1]=i=>e.v$.email.$model=i),placeholder:"請輸入電子信箱",class:n(["mr-2 md:w-1/2",{"p-invalid":e.v$.email.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.email.$invalid&&t.submitted||e.v$.email.$pending.$response?(m(),l("small",z,v(e.v$.email.required.$message.replace("Value","電子信箱")),1)):f("",!0)])]),s("div",F,[t.isDisabled===!0?(m(),l("a",{key:0,href:"#",onClick:a[2]||(a[2]=b((...i)=>r.editName&&r.editName(...i),["prevent"])),class:"hover:text-primary-01"},[j,I(" 編輯個人資料 ")])):(m(),l("button",G,"儲存變更"))])],32)])],64)}const R=V(N,[["render",H],["__scopeId","data-v-eaf1f41e"]]);export{R as default};
