import{_ as n,o as d,a as k}from"./index-5b7885a8.js";const{VITE_URL:c}={VITE_URL:"https://joinsport-server-render.onrender.com",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",VITE_MAP_KEY:"AIzaSyAScKOJBsEFvLrg4YGx5ticXsBzFYZPATw",VITE_MAP_URL:"https://maps.googleapis.com/maps/api/geocode/json",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},h={props:{userId:{type:String},activity:{type:Object}},data(){return{bookmarkId:null,isBookmarked:!1}},methods:{getActivityBookmark(s){const e=`${c}/users/${this.userId}/bookmarks?activityId=${s}`;this.$http.get(e).then(t=>{t.data[0]&&(t.data[0].isCancelled===!1&&(this.isBookmarked=!0),this.bookmarkId=t.data[0].id)}).catch(t=>{console.log(t)})},handleBookmark(){if(!this.bookmarkId&&this.isBookmarked===!1){const i=`${c}/bookmarks/`,a={userId:parseInt(this.userId,10),activityId:this.activity.id,isCancelled:!1};this.$http.post(i,a).then(o=>{this.isBookmarked=!0,this.bookmarkId=o.data.id}).catch(o=>{const r=o.response.statusText;this.$toast.add({severity:"error",detail:r,life:3e3,contentStyleClass:"custom-toast-danger"})});return}const s=this.bookmarkId,e=`${c}/bookmarks/${s}`,t={isCancelled:!1};this.isBookmarked===!0&&(t.isCancelled=!0),this.$http.patch(e,t).then(()=>{this.isBookmarked=!this.isBookmarked,this.isBookmarked===!0&&this.$toast.add({severity:"success",detail:"加入我的收藏",life:3e3}),this.isBookmarked===!1&&this.$toast.add({severity:"info",detail:"移除我的收藏",life:3e3})}).catch(i=>{const a=i.response.statusText;this.$toast.add({severity:"error",detail:a,life:3e3,contentStyleClass:"custom-toast-danger"})})}},watch:{activity(s){this.getActivityBookmark(s.id)}},mounted(){this.getActivityBookmark(this.activity.id)}},l={key:0,class:"pi pi-bookmark text-lg hover:text-primary-01"},m={key:1,class:"pi pi-bookmark-fill text-lg text-yellow-300 hover:text-primary-01"};function p(s,e,t,i,a,o){return d(),k("button",{type:"button",onClick:e[0]||(e[0]=(...r)=>o.handleBookmark&&o.handleBookmark(...r))},[a.isBookmarked?(d(),k("i",m)):(d(),k("i",l))])}const y=n(h,[["render",p]]);export{y as B};
