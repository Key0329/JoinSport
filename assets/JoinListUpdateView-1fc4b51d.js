import{J as x}from"./JoinCardRow-6ffdd7e3.js";import{L as A}from"./LeafletMap-c328ac35.js";import{_ as w,s as B,t as u,a as d,d as r,b as o,F as g,B as I,u as v,r as s,o as c,H as C,v as b,x as M,w as T}from"./index-46b16702.js";import{j as _}from"./activitiesStore-92de757d.js";import{P as J}from"./PaginationComponent-0ecf0714.js";import{B as U}from"./BookMark-d77e9ab7.js";import"./leaflet-src-97f116c9.js";const D={name:"JoinListUpdateView",components:{JoinCardRow:x,LeafletMap:A,PaginationComponent:J,BookMark:U},data(){return{userId:null,currentPage:1}},computed:{...B(_,["availableActivities"]),hotActivitiesList:({availableActivities:a,arrangePage:i})=>{const p=a.filter(e=>e.isCancelled===!1).sort((e,n)=>{const l=new Date(e.updateDate).getTime();return new Date(n.updateDate).getTime()-l});return i(p)}},methods:{...u(_,["getOrders","getActivities","changePage","arrangePage"]),...u(v,["getUserId"])},watch:{$route(a){this.currentPage=a.params.page,this.changePage(a.params.page)}},mounted(){this.getActivities(),this.getOrders(),this.changePage(this.$route.params.page),this.userId=this.getUserId()}},V={class:"pt-4 pb-20 md:pt-10"},j={class:"container"},N=o("h2",{class:"mb-6 text-center text-2xl md:mb-10 md:text-start"},"最新揪團",-1),R={class:"grid md:grid-cols-12 lg:gap-0"},S={class:"col-span-7 flex flex-col gap-6"},F={class:"sticky top-[286px] col-span-4 col-end-13 hidden h-[400px] md:flex"};function O(a,i,h,p,e,n){const l=s("PToast"),m=s("PaginationComponent"),f=s("BookMark"),L=s("join-card-row"),k=s("RouterLink"),P=s("LeafletMap");return c(),d(g,null,[r(l),o("section",V,[o("div",j,[N,r(m,{currentPage:e.currentPage,pageTotal:n.hotActivitiesList.pageTotal,pageUrl:"/JoinList/Update/",class:"mb-4"},null,8,["currentPage","pageTotal"]),o("div",R,[o("ul",S,[(c(!0),d(g,null,I(n.hotActivitiesList.list,t=>(c(),d("li",{key:t==null?void 0:t.id,class:"relative"},[e.userId?(c(),C(f,{key:0,class:"absolute right-4 top-3 z-50",userId:e.userId,activity:t,onClick:i[0]||(i[0]=b(()=>{},["stop"]))},null,8,["userId","activity"])):M("",!0),r(k,{to:`/JoinDetail/id=${t==null?void 0:t.id}`},{default:T(()=>[r(L,{userId:e.userId,activity:t},null,8,["userId","activity"])]),_:2},1032,["to"])]))),128))]),o("aside",F,[r(P,{mapActivities:n.hotActivitiesList.list},null,8,["mapActivities"])])])])])],64)}const W=w(D,[["render",O]]);export{W as default};
