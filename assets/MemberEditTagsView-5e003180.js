import{_ as x,s as v,t as E,a as r,b as a,e as c,C as m,d as w,z as C,v as S,x as h,F as T,B as _,r as V,o as n,G as A,D as k,E as D}from"./index-3e1b4187.js";import{s as b}from"./searchStore-df6ff9e7.js";const{VITE_URL:y}={VITE_URL:"https://joinsport-server-render.onrender.com",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",VITE_MAP_KEY:"AIzaSyAScKOJBsEFvLrg4YGx5ticXsBzFYZPATw",VITE_MAP_URL:"https://maps.googleapis.com/maps/api/geocode/json",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},I={name:"MemberEditTagsView",data(){return{tempSelectedTag:null,selectedTags:[],filteredTags:null,isDisabled:!0}},computed:{...v(b,["tags","tagList"])},methods:{...E(b,["getTags"]),searchTag(t){this.selectedTags.length<=4&&setTimeout(()=>{t.query.trim().length?this.filteredTags=this.tagList.filter(e=>e.label.toLowerCase().match(t.query.toLowerCase())):this.filteredTags=[...this.tagList]},250)},addTag(t){if(t.target.tagName==="BUTTON"){const o=t.target.textContent;this.selectedTags.push(o),this.tempSelectedTag="";return}const e=t.target.value;if(this.selectedTags.some(o=>o===e)){this.$toast.add({severity:"warn",detail:"已有相同標籤",life:3e3});return}if(e===""){this.$toast.add({severity:"info",detail:"請輸入標籤內容",life:3e3});return}this.selectedTags.push(e),this.tempSelectedTag=""},removeTag(t){this.selectedTags.splice(t,1)},getActivity(){const{id:t}=this.$route.params,e=`${y}/activities/${t}`;this.$http.get(e).then(d=>{this.selectedTags=d.data.tags}).catch(d=>{const o=d.response.statusText;this.$toast.add({severity:"error",detail:`${o} 未能取得活動資訊`,life:3e3,contentStyleClass:"custom-toast-danger"})})},updateActivityTags(){const{id:t}=this.$route.params,e=`${y}/activities/${t}`,d={tags:this.selectedTags};this.$http.patch(e,d).then(()=>{this.$toast.add({severity:"success",detail:"修改成功",life:3e3}),this.isDisabled=!0}).catch(o=>{const i=o.response.statusText;this.$toast.add({severity:"error",detail:`${i} 修改失敗`,life:3e3,contentStyleClass:"custom-toast-danger"})})},enableEdit(){this.isDisabled=!this.isDisabled},cancelEdit(){this.getActivity(),this.enableEdit()}},mounted(){this.getActivity(),this.getTags()}},g=t=>(k("data-v-ae4bc263"),t=t(),D(),t),L={class:"py-10"},M={class:"mb-12 text-center text-xl"},B=g(()=>a("br",null,null,-1)),N={class:"text-primary-01"},U={class:"mb-10 flex flex-col items-center justify-center"},j={class:"mb-10 flex w-full items-center"},P=g(()=>a("i",{class:"pi pi-pencil ml-4 mr-1"},null,-1)),R={class:"flex flex-wrap gap-3"},z={class:"mr-8 text-lg"},F=g(()=>a("i",{class:"pi pi-tag mr-2"},null,-1)),K=["onClick"],O=g(()=>a("i",{class:"pi pi-times text-xs"},null,-1)),Y=[O],q={key:0,class:"mt-10 ml-auto flex gap-4"},G={class:"mb-10"},J=g(()=>a("h3",{class:"mb-4 ml-2 text-lg"},"Tags :",-1)),X={class:"flex flex-wrap"},H=["disabled"];function Z(t,e,d,o,i,l){const f=V("AutoComplete");return n(),r("section",L,[a("h2",M,[c(" 請盡量詳細地選擇，將會幫助您的揪團找到最適合的團員"),B,c("可以新增 "),a("strong",N,m(5-i.selectedTags.length),1),c(" 個標籤 ")]),a("div",U,[a("div",j,[w(f,{modelValue:i.tempSelectedTag,"onUpdate:modelValue":e[0]||(e[0]=s=>i.tempSelectedTag=s),suggestions:i.filteredTags,onComplete:e[1]||(e[1]=s=>l.searchTag(s)),onKeyup:e[2]||(e[2]=C(s=>l.addTag(s),["enter"])),optionLabel:"label",loadingIcon:"false",placeholder:"輸入適合揪團的標籤 ( 例如: 攀岩、潛水、戶外運動 )",disabled:i.selectedTags.length===5,class:"w-3/4"},null,8,["modelValue","suggestions","disabled"]),i.isDisabled===!0?(n(),r("button",{key:0,onClick:e[3]||(e[3]=S((...s)=>l.enableEdit&&l.enableEdit(...s),["prevent"])),class:"hover:text-primary-01"},[P,c(" 編輯標籤 ")])):h("",!0)]),a("ul",R,[(n(!0),r(T,null,_(i.selectedTags,(s,u)=>(n(),r("li",{class:"flex items-center rounded-full bg-secondary-yellow py-2 pl-8 pr-4",key:s+u},[a("span",z,[F,c(m(s),1)]),i.isDisabled?h("",!0):(n(),r("button",{key:0,type:"button",class:"flex h-5 w-5 items-center justify-center rounded-full bg-primary-03",onClick:p=>l.removeTag(u)},Y,8,K))]))),128))]),i.isDisabled?h("",!0):(n(),r("div",q,[a("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...s)=>l.updateActivityTags&&l.updateActivityTags(...s))}," 確認 "),a("button",{type:"button",onClick:e[5]||(e[5]=(...s)=>l.cancelEdit&&l.cancelEdit(...s)),class:"btn border border-primary-01 hover:bg-primary-01 hover:text-white"}," 取消 ")]))]),a("div",G,[J,a("ul",X,[(n(!0),r(T,null,_(t.tags,(s,u)=>(n(),r("li",{class:"flex items-center justify-center",key:s+u},[a("button",{class:A(["mb-2 mr-2 rounded-full bg-primary-02 px-8 py-2 hover:bg-primary-04",{hidden:i.selectedTags.some(p=>p===s),"cursor-not-allowed opacity-50":i.selectedTags.length===5}]),type:"button",disabled:i.selectedTags.length===5,onClick:e[6]||(e[6]=p=>l.addTag(p))},m(s),11,H)]))),128))])])])}const $=x(I,[["render",Z],["__scopeId","data-v-ae4bc263"]]);export{$ as default};
