import{s as w,t as z,_ as y,r as i,o as s,a as h,d as e,w as n,e as _,F as v,B as L,H as b,b as p,C as S}from"./index-3e1b4187.js";import{j as d}from"./activitiesStore-fd89c034.js";import{a as g}from"./leaflet-src-7087ddc7.js";const C={name:"LeafletMap",props:{mapActivities:{type:Array},mapActivity:{type:Object}},data(){return{data:[{name:"宜蘭外澳衝浪",local:[24.878043,121.8415]},{name:"週末橋下籃球小聚",local:[25.051434,121.552293]},{name:"台灣室內抱石之旅",local:[25.034027,121.497107]},{name:"單車日行千里",local:[24.94545,121.373392]}],zoom:8,center:g.latLng(23.854929,121.052),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'©<a href="http://osm.org/copyright">OpenStreetMap</a> contributors',options:{zoomControl:!0},icon:{type:{grey:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-grey.png",gold:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png"},shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}}},computed:{...w(d,["activitiesList"]),filterActivities(){return this.mapActivities?this.mapActivities.filter(o=>o.isCancelled!==!0):null},locationData(){return this.filterActivities?this.filterActivities.map(o=>({id:o.id,name:o.title,local:o.location,img:o.mainImg})):[{id:this.mapActivity.id,name:this.mapActivity.title,local:this.mapActivity.location,img:this.mapActivity.mainImg}]}},methods:{...z(d,["getActivities"]),getCurrentLocation(){navigator.geolocation.getCurrentPosition(o=>{var a,c;const l=o.coords;this.center=g.latLng(l.latitude,l.longitude),(c=(a=this.$refs.location)==null?void 0:a.leafletObject)==null||c.openPopup(),this.zoom=13})}},watch:{locationData(o){this.data=o}},mounted(){this.$nextTick(()=>{this.getCurrentLocation()})}},j={class:"h-[400px] w-full"},B=["src"],D={class:"flex items-center text-black group-hover:text-primary-01"},M=p("i",{class:"pi pi-external-link ml-1 text-xs"},null,-1);function N(o,l,a,c,t,O){const f=i("l-tile-layer"),m=i("l-popup"),u=i("l-marker"),A=i("l-icon"),x=i("RouterLink"),k=i("l-map");return s(),h("div",j,[e(k,{ref:"myMap",zoom:t.zoom,center:t.center,options:t.options},{default:n(()=>[e(f,{url:t.url,attribution:t.attribution},null,8,["url","attribution"]),e(u,{ref:"location","lat-lng":t.center},{default:n(()=>[e(m,null,{default:n(()=>[_("你的位置")]),_:1})]),_:1},8,["lat-lng"]),(s(!0),h(v,null,L(t.data,r=>(s(),b(u,{"lat-lng":r.local,key:r.id},{default:n(()=>[e(A,{"icon-url":t.icon.type.gold,"shadow-url":t.icon.shadowUrl,"icon-size":t.icon.iconSize,"icon-anchor":t.icon.iconAnchor,"popup-anchor":t.icon.popupAnchor,"shadow-size":t.icon.shadowSize},null,8,["icon-url","shadow-url","icon-size","icon-anchor","popup-anchor","shadow-size"]),e(m,null,{default:n(()=>[e(x,{class:"group",to:`/joinDetail/id=${r.id}`},{default:n(()=>[p("img",{src:r.img,alt:"activity-photo"},null,8,B),p("p",D,[_(S(r.name)+" ",1),M])]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["lat-lng"]))),128))]),_:1},8,["zoom","center","options"])])}const I=y(C,[["render",N]]);export{I as L};
