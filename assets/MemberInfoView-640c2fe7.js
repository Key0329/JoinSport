import{_ as g,H as V,s as c,a as l,d as m,b as s,u as b,D as n,B as v,C as h,e as I,F as D,t as S,r as d,o,z as w,A as k}from"./index-531739a6.js";import{u as M,r as f,e as N}from"./i18n-validators-454b4944.js";import{m as _}from"./memberStore-3b80990c.js";const C={setup:()=>({v$:M()}),data(){return{userId:null,name:"",email:"",submitted:!1,isDisabled:!0}},computed:{...V(_,["user"])},validations(){return{name:{required:f},email:{required:f,email:N}}},methods:{...c(S,["getUserId"]),...c(_,["getMemberData","editMemberData"]),handleSubmit(e){if(this.submitted=!0,!e)return;const a={id:this.userId,email:this.email,name:this.name};this.editMemberData(a),this.$toast.add({severity:"success",detail:"修改成功",life:1e3}),this.isDisabled=!0},editName(){this.isDisabled=!1}},watch:{user(){this.name=this.user.name,this.email=this.user.email}},mounted(){const e=this.getUserId();this.getMemberData(e),this.userId=e}},u=e=>(w("data-v-26227d38"),e=e(),k(),e),T=u(()=>s("h1",{class:"mb-10 text-4xl"},"編輯個人資訊",-1)),x={class:"mb-10 flex items-center"},A=u(()=>s("button",{type:"button",class:"btn btn-primary"},"變更頭像",-1)),B={class:"mb-6"},P={class:"flex flex-col"},U={key:0,class:"p-error"},q={class:"mb-6"},z={class:"flex flex-col"},E={key:0,class:"p-error"},F={class:"mt-10 flex justify-center"},j=u(()=>s("i",{class:"pi pi-pencil mr-1"},null,-1)),H={key:1,type:"submit",class:"btn btn-primary"};function G(e,a,J,K,t,r){const $=d("PToast"),y=d("PAvatar"),p=d("InputText");return o(),l(D,null,[m($),s("section",null,[T,s("div",x,[m(y,{image:e.user.img,size:"xlarge",class:"info-avatar mr-10 w-20",shape:"circle"},null,8,["image"]),A]),s("form",{onSubmit:a[3]||(a[3]=b(i=>r.handleSubmit(!e.v$.$invalid),["prevent"]))},[s("ul",null,[s("li",B,[s("div",P,[s("label",{for:"name",class:n(["mb-2 px-2",{"p-error":e.v$.name.$invalid&&t.submitted}])},"姓名",2),m(p,{id:"name",type:"text",modelValue:e.v$.name.$model,"onUpdate:modelValue":a[0]||(a[0]=i=>e.v$.name.$model=i),placeholder:"請輸入姓名",class:n(["mr-2 w-1/2",{"p-invalid":e.v$.name.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.name.$invalid&&t.submitted||e.v$.name.$pending.$response?(o(),l("small",U,v(e.v$.name.required.$message.replace("Value","姓名")),1)):h("",!0)]),s("li",q,[s("div",z,[s("label",{for:"email",class:n(["mb-2 px-2",{"p-error":e.v$.email.$invalid&&t.submitted}])},"電子信箱",2),m(p,{id:"accountEmail",type:"email",modelValue:e.v$.email.$model,"onUpdate:modelValue":a[1]||(a[1]=i=>e.v$.email.$model=i),placeholder:"請輸入電子信箱",class:n(["mr-2 w-1/2",{"p-invalid":e.v$.email.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.email.$invalid&&t.submitted||e.v$.email.$pending.$response?(o(),l("small",E,v(e.v$.email.required.$message.replace("Value","電子信箱")),1)):h("",!0)])]),s("div",F,[t.isDisabled===!0?(o(),l("a",{key:0,href:"#",onClick:a[2]||(a[2]=b((...i)=>r.editName&&r.editName(...i),["prevent"])),class:"hover:text-primary-01"},[j,I(" 編輯個人資料 ")])):(o(),l("button",H,"儲存變更"))])],32)])],64)}const R=g(C,[["render",G],["__scopeId","data-v-26227d38"]]);export{R as default};
