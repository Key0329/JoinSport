import{J as x}from"./JoinCardRow-5196a6d9.js";import{L as A}from"./LeafletMap-eedb17dc.js";import{_ as I,s as w,t as m,a as l,d as i,b as o,F as d,B,u as C,r as s,o as c,H as v,v as b,x as M,w as J}from"./index-d235b29a.js";import{j as u}from"./activitiesStore-5c27cac2.js";import{P as T}from"./PaginationComponent-539cdb4a.js";import{B as V}from"./BookMark-c6d4cefc.js";import"./leaflet-src-1a242fd7.js";const j={name:"JoinListHotView",components:{JoinCardRow:x,LeafletMap:A,PaginationComponent:T,BookMark:V},data(){return{userId:null,currentPage:1}},computed:{...w(u,["availableActivities","isLoading"]),hotActivitiesList:({availableActivities:a,arrangePage:r})=>{const p=a.filter(t=>t.isCancelled===!1).sort((t,n)=>n.numParticipants-t.numParticipants);return r(p)}},methods:{...m(u,["getOrders","getActivities","changePage","arrangePage"]),...m(C,["getUserId"])},watch:{$route(a){this.currentPage=a.params.page,this.changePage(a.params.page)}},mounted(){this.getActivities(),this.getOrders(),this.changePage(this.$route.params.page),this.userId=this.getUserId()}},H={class:"pt-4 pb-20 md:pt-10"},N={class:"container"},R=o("h2",{class:"mb-6 text-center text-2xl md:mb-10 md:text-start"},"熱門揪團",-1),S={class:"grid gap-8 md:grid-cols-12 lg:gap-0"},U={class:"col-span-7 flex flex-col gap-6"},F={class:"sticky top-[286px] col-span-4 col-end-13 hidden h-[400px] md:flex"};function O(a,r,g,p,t,n){const _=s("PToast"),h=s("PaginationComponent"),f=s("BookMark"),L=s("join-card-row"),P=s("RouterLink"),k=s("LeafletMap");return c(),l(d,null,[i(_),o("main",H,[o("div",N,[R,i(h,{currentPage:t.currentPage,pageTotal:n.hotActivitiesList.pageTotal,pageUrl:"/JoinList/Hot/",class:"mb-4"},null,8,["currentPage","pageTotal"]),o("section",S,[o("ul",U,[(c(!0),l(d,null,B(n.hotActivitiesList.list,e=>(c(),l("li",{key:e==null?void 0:e.id,class:"relative"},[t.userId?(c(),v(f,{key:0,class:"absolute right-4 top-3 z-50",userId:t.userId,activity:e,onClick:r[0]||(r[0]=b(()=>{},["stop"]))},null,8,["userId","activity"])):M("",!0),i(P,{to:`/JoinDetail/id=${e==null?void 0:e.id}`},{default:J(()=>[i(L,{activity:e,userId:t.userId},null,8,["activity","userId"])]),_:2},1032,["to"])]))),128))]),o("aside",F,[i(k,{mapActivities:n.hotActivitiesList.list},null,8,["mapActivities"])])])])])],64)}const W=I(j,[["render",O]]);export{W as default};
