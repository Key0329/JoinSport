import{_ as y,G as V,s as p,a as l,b as s,d as n,J as o,B as c,D as b,u as v,e as g,t as I,r as h,o as m,z as D,A as S}from"./index-56f709e6.js";import{u as w,r as f,e as k}from"./i18n-validators-c6003628.js";import{m as $}from"./memberStore-3d5bcbed.js";const M={inject:["reload"],setup:()=>({v$:w()}),data(){return{userId:null,name:"",email:"",submitted:!1,isDisabled:!0}},computed:{...V($,["user"])},validations(){return{name:{required:f},email:{required:f,email:k}}},methods:{...p(I,["getUserId"]),...p($,["getMemberData","editMemberData"]),handleSubmit(e){if(this.submitted=!0,!e)return;const a={id:this.userId,email:this.email,name:this.name};this.editMemberData(a),this.isDisabled=!0,this.reload()},editName(){this.isDisabled=!1}},watch:{user(){this.name=this.user.name,this.email=this.user.email}},mounted(){const e=this.getUserId();this.getMemberData(e),this.userId=e}},d=e=>(D("data-v-8ce9596b"),e=e(),S(),e),N=d(()=>s("h1",{class:"mb-10 text-4xl"},"編輯個人資訊",-1)),x={class:"mb-10 flex items-center"},A=d(()=>s("button",{type:"button",class:"btn btn-primary"},"變更頭像",-1)),B={class:"mb-6"},C={class:"flex flex-col"},U={key:0,class:"p-error"},q={class:"mb-6"},z={class:"flex flex-col"},T={key:0,class:"p-error"},j={class:"mt-10 flex justify-center"},E=d(()=>s("i",{class:"pi pi-pencil mr-1"},null,-1)),P={key:1,type:"submit",class:"btn btn-primary"};function G(e,a,J,F,t,r){const _=h("PAvatar"),u=h("InputText");return m(),l("section",null,[N,s("div",x,[n(_,{image:e.user.img,size:"xlarge",class:"info-avatar mr-10 w-20",shape:"circle"},null,8,["image"]),A]),s("form",{onSubmit:a[3]||(a[3]=v(i=>r.handleSubmit(!e.v$.$invalid),["prevent"]))},[s("ul",null,[s("li",B,[s("div",C,[s("label",{for:"name",class:o(["mb-2 px-2",{"p-error":e.v$.name.$invalid&&t.submitted}])},"姓名",2),n(u,{id:"name",type:"text",modelValue:e.v$.name.$model,"onUpdate:modelValue":a[0]||(a[0]=i=>e.v$.name.$model=i),placeholder:"請輸入姓名",class:o(["mr-2 w-1/2",{"p-invalid":e.v$.name.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.name.$invalid&&t.submitted||e.v$.name.$pending.$response?(m(),l("small",U,c(e.v$.name.required.$message.replace("Value","姓名")),1)):b("",!0)]),s("li",q,[s("div",z,[s("label",{for:"email",class:o(["mb-2 px-2",{"p-error":e.v$.email.$invalid&&t.submitted}])},"電子信箱",2),n(u,{id:"accountEmail",type:"email",modelValue:e.v$.email.$model,"onUpdate:modelValue":a[1]||(a[1]=i=>e.v$.email.$model=i),placeholder:"請輸入電子信箱",class:o(["mr-2 w-1/2",{"p-invalid":e.v$.email.$invalid&&t.submitted}]),disabled:t.isDisabled},null,8,["modelValue","class","disabled"])]),e.v$.email.$invalid&&t.submitted||e.v$.email.$pending.$response?(m(),l("small",T,c(e.v$.email.required.$message.replace("Value","電子信箱")),1)):b("",!0)])]),s("div",j,[t.isDisabled===!0?(m(),l("a",{key:0,href:"#",onClick:a[2]||(a[2]=v((...i)=>r.editName&&r.editName(...i),["prevent"])),class:"hover:text-primary-01"},[E,g(" 編輯個人資料 ")])):(m(),l("button",P,"儲存變更"))])],32)])}const O=y(M,[["render",G],["__scopeId","data-v-8ce9596b"]]);export{O as default};
