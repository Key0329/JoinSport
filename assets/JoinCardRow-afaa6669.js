import{_ as S,r as F,y as T,o as s,a as i,G as B,b as e,x as c,F as P,B as R,C as l,e as n,A as z,H as A,w as E,f as G}from"./index-5b7885a8.js";const O={name:"JoinCardRow",props:{activity:{type:Object},userId:{type:String}},data(){return{imgLoading:!0,isLoading:!0}},computed:{hasJoined(){var a,r;return(r=(a=this.activity)==null?void 0:a.participantsId)==null?void 0:r.includes(parseInt(this.userId,10))},isHost(){var a;return((a=this.activity)==null?void 0:a.userId)===this.userId},isCancelled(){var a;return(a=this.activity)==null?void 0:a.isCancelled}},methods:{onImageLoad(){this.imgLoading=!1}},watch:{activity:{handler(){this.isLoading=!1},immediate:!0}}},q=G('<div class="relative h-full w-full sm:w-1/2"><div class="skeleton flex h-[180px] w-full items-center justify-center rounded-l-[10px]"><i class="pi pi-image text-xl text-gray-500"></i></div></div><div class="w-full rounded-b-[10px] border-x border-b px-3 pt-2 pb-3 sm:border-0"><div class="mb-2 flex items-center justify-between"><h5 class="skeleton h-7 w-full rounded-lg"></h5></div><p class="skeleton mb-4 h-5 w-1/2 rounded-lg"></p><div class="mb-2 flex flex-col gap-2 md:flex-row"><p class="skeleton h-8 w-1/4 rounded-lg px-2 py-1"></p><p class="skeleton h-8 w-1/4 rounded-lg px-2 py-1"></p></div><div class="flex flex-col md:flex-row md:items-end"><div class="mb-2 md:mb-0"><ul class="my-3 flex -space-x-2 overflow-hidden"><li class="skeleton h-9 w-9 rounded-full"></li><li class="skeleton h-9 w-9 rounded-full"></li><li class="skeleton h-9 w-9 rounded-full"></li><li class="skeleton h-9 w-9 rounded-full"></li></ul><div class="flex"><p class="skeleton mr-2 h-5 w-1/2 rounded-lg"></p><p class="skeleton mr-2 h-5 w-1/2 rounded-lg"></p></div></div><p class="skeleton ml-auto h-10 w-1/4 rounded-lg"></p></div></div>',2),K=[q],M={class:"relative w-full sm:w-1/2"},Q={key:0,class:"skeleton flex h-full w-full items-center justify-center rounded-t-[10px]"},U=e("i",{class:"pi pi-image text-xl text-gray-500"},null,-1),W=[U],X=["src"],Y={class:"absolute top-3 left-2 flex flex-col flex-wrap gap-1"},Z={class:"tag py-1 text-xs hover:text-black"},$={class:"w-full rounded-b-[10px] border-x border-b px-3 pt-2 pb-3 sm:rounded-bl-none sm:border-y sm:border-l-0 md:border-0"},ee={class:"flex items-center justify-between"},te={class:"mb-2 text-lg"},se={class:"mr-8 flex"},ie={key:0,class:"flex items-center rounded-lg bg-primary-04 px-2 py-1 text-xs text-gray-600"},le=e("i",{class:"pi pi-check mr-1"},null,-1),ae={key:1,class:"flex items-center rounded-lg bg-primary-01 px-2 py-1 text-xs text-white"},oe=e("i",{class:"pi pi-user mr-1"},null,-1),de={key:2,class:"flex items-center rounded-lg bg-red-400 px-2 py-1 text-xs text-white"},ne=e("i",{class:"pi pi-user mr-1"},null,-1),re={class:"h-10 text-sm text-[#6f6f6f]"},ce={class:"absolute top-3 right-2 mb-4 gap-2 sm:relative sm:flex sm:flex-row"},ue={class:"mb-2 flex items-center rounded-full bg-primary-03 py-1 px-2 text-sm text-[#3D3D3D] sm:mb-0 md:mb-0"},me=e("span",{class:"material-icons text-primary-01"}," room ",-1),xe={class:"flex items-center rounded-full bg-primary-03 py-1 px-2 text-sm text-[#3D3D3D]"},he=e("span",{class:"material-icons mr-1 text-primary-01"}," schedule ",-1),_e={class:"flex flex-col md:flex-row md:items-end"},pe={class:"mb-2 md:mb-0"},fe={class:"my-3 flex h-9 -space-x-2 overflow-hidden"},ye={key:0,class:"skeleton h-full w-full rounded-full"},ve=["src"],ge={key:0},we={class:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-400 text-white ring-2 ring-white"},be={class:"mr-2 text-sm"},ke={class:"mr-2 text-sm text-red-500"},Le={key:0,class:"rounded-lg bg-primary-01 px-2 py-1 text-sm text-white"};function De(a,r,t,Ce,u,o){var x,h,_,p,f,y,v,g,w,b,k,L,D,C,I,J,j,N;const V=F("RouterLink"),H=T("ripple");return u.isLoading?(s(),i("div",{key:0,class:B(["group flex h-full flex-col gap-4 rounded-[10px] bg-white shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)] sm:flex-row",{"opacity-50":o.isCancelled}])},K,2)):(s(),i("div",{key:1,class:B(["group flex h-full flex-col rounded-[10px] bg-white shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)] sm:flex-row",{"opacity-50":o.isCancelled}])},[e("div",M,[u.imgLoading?(s(),i("div",Q,W)):c("",!0),e("img",{onLoad:r[0]||(r[0]=(...d)=>o.onImageLoad&&o.onImageLoad(...d)),class:"h-[180px] w-full rounded-t-[10px] sm:h-full sm:rounded-l-[10px] sm:rounded-tr-none",src:(x=t.activity)==null?void 0:x.mainImg,alt:"card-img-01"},null,40,X),e("ul",Y,[(s(!0),i(P,null,R((h=t.activity)==null?void 0:h.tags,(d,m)=>(s(),i("li",{key:d+m},[e("span",Z,l(d),1)]))),128))])]),e("div",$,[e("div",ee,[e("h5",te,l((_=t.activity)==null?void 0:_.title),1),e("div",se,[o.hasJoined?(s(),i("div",ie,[le,n("已參加揪團 ")])):o.isHost?(s(),i("div",ae,[oe,n("您是主辦者 ")])):o.isCancelled?(s(),i("div",de,[ne,n("此揪團已取消 ")])):c("",!0)])]),e("p",re,l((p=t.activity)==null?void 0:p.description),1),e("div",ce,[e("p",ue,[me,n(l((f=t.activity)==null?void 0:f.city)+l((y=t.activity)==null?void 0:y.district),1)]),e("p",xe,[he,n(l((v=t.activity)==null?void 0:v.date)+" "+l((w=(g=t.activity)==null?void 0:g.startTime)==null?void 0:w.time),1)])]),e("div",_e,[e("div",pe,[e("ul",fe,[(s(!0),i(P,null,R((b=t.activity)==null?void 0:b.participants,(d,m)=>(s(),i("li",{key:"participant"+m},[u.isLoading?(s(),i("div",ye)):c("",!0),e("img",{class:"inline-block h-9 w-9 rounded-full ring-2 ring-white",src:d,alt:"avatar01"},null,8,ve)]))),128)),((k=t.activity)==null?void 0:k.numParticipants)>3?(s(),i("li",ge,[e("div",we," +"+l(((L=t.activity)==null?void 0:L.numParticipants)-3),1)])):c("",!0)]),e("div",null,[e("span",be,l((D=t.activity)==null?void 0:D.numParticipants)+" 位已參加揪團",1),e("span",ke,"剩餘 "+l(((C=t.activity)==null?void 0:C.maxJoinNum)-((I=t.activity)==null?void 0:I.numParticipants))+" 空位",1),((J=t.activity)==null?void 0:J.maxJoinNum)-((j=t.activity)==null?void 0:j.numParticipants)===0?(s(),i("span",Le,"揪團已滿")):c("",!0)])]),z((s(),A(V,{to:`/JoinDetail/id=${(N=t.activity)==null?void 0:N.id}`,class:"btn-primary btn p-ripple p-2 group-hover:bg-secondary-yellow group-hover:text-[#3D3D3D] sm:w-1/4 md:ml-auto"},{default:E(()=>[n("查看詳情")]),_:1},8,["to"])),[[H]])])])],2))}const Je=S(O,[["render",De]]);export{Je as J};
