import{F as z}from"./FrontHeader-bc09f729.js";import{s as E,t as S,_ as C,u as R,r as m,o as b,a as D,b as n,d as f,C as _,F as j,B as J,w as y,e as w,H as W,D as q,E as Y}from"./index-3e1b4187.js";import{m as H}from"./memberStore-47af8238.js";import{j as $}from"./activitiesStore-fd89c034.js";import{c as U,D as K,m as L,g as T,v as c,S as X,V as Q,C as F,s as Z,i as ee,f as V,a as te,b as se,N as ae,d as ne,e as N,B,h as ie,j as P,k as re,l as G,E as oe,n as le,o as de,p as M,q as ce,r as ue,t as I,F as fe,u as pe}from"./zh-tw-062f3096.js";import"./searchStore-df6ff9e7.js";const me={name:"MemberPanel",data(){return{userId:null}},computed:{...E(H,["user"])},methods:{...S(R,["getUserId"]),...S(H,["getMemberData"])},mounted(){this.userId=this.getUserId(),this.getMemberData(this.userId)}},he={class:"rounded-lg bg-primary-03 px-10 py-6"},ve={class:"mb-8 flex items-center gap-6"},ge={class:"text-xl"},_e={class:"text-sm"},ye={class:"flex flex-wrap gap-2"},be=n("i",{class:"pi pi-tag mr-1"},null,-1);function xe(t,e,s,a,r,i){const o=m("PAvatar"),l=m("RouterLink");return b(),D("div",he,[n("div",ve,[f(o,{image:t.user.img,size:"xlarge",shape:"circle",class:"ring-2 ring-white"},null,8,["image"]),n("div",null,[n("h3",ge,_(t.user.name),1),n("span",_e,_(t.user.email),1)])]),n("ul",ye,[(b(!0),D(j,null,J(t.user.favoriteSports,d=>(b(),D("li",{key:"tag"+d},[f(l,{to:`/joinList/search/text=${d}&area=0&date=0&page=1`,class:"tag flex items-center"},{default:y(()=>[be,w(" "+_(d),1)]),_:2},1032,["to"])]))),128))])])}const we=C(me,[["render",xe]]),De={data(){return{items:[{label:"我的揪團",icon:"pi pi-fw pi-calendar",items:[{label:"我參加的揪團",icon:"pi pi-fw pi-users",to:"/Member/List"},{label:"我主持的揪團",icon:"pi pi-fw pi-key",to:"/Member/Host"},{label:"已收藏的揪團",icon:"pi pi-fw pi-heart",to:"/Member/Collection"}]},{label:"我的資訊",icon:"pi pi-fw pi-user",items:[{label:"個人資訊",icon:"pi pi-fw pi-align-left",to:"/Member/Info"},{label:"個人標籤",icon:"pi pi-fw pi-id-card",to:"/Member/Tags"}]}]}}};function Se(t,e,s,a,r,i){const o=m("PanelMenu",!0);return b(),W(o,{model:r.items},null,8,["model"])}const Ae=C(De,[["render",Se]]);class Ce extends B{constructor(){super(...arguments),this.state={textId:T()}}render(){let{theme:e,dateEnv:s,options:a,viewApi:r}=this.context,{cellId:i,dayDate:o,todayRange:l}=this.props,{textId:d}=this.state,u=ie(o,l),p=a.listDayFormat?s.format(o,a.listDayFormat):"",g=a.listDaySideFormat?s.format(o,a.listDaySideFormat):"",h=Object.assign({date:s.toDate(o),view:r,textId:d,text:p,sideText:g,navLinkAttrs:P(this.context,o),sideNavLinkAttrs:P(this.context,o,"day",!1)},u);return c(F,{elTag:"tr",elClasses:["fc-list-day",...re(u,e)],elAttrs:{"data-date":V(o)},renderProps:h,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:Ie,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},v=>c("th",{scope:"colgroup",colSpan:3,id:i,"aria-labelledby":d},c(v,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function Ie(t){return c(G,null,t.text&&c("a",Object.assign({id:t.textId,className:"fc-list-day-text"},t.navLinkAttrs),t.text),t.sideText&&c("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},t.sideNavLinkAttrs),t.sideText))}const Te=U({hour:"numeric",minute:"2-digit",meridiem:"short"});class $e extends B{render(){let{props:e,context:s}=this,{options:a}=s,{seg:r,timeHeaderId:i,eventHeaderId:o,dateHeaderId:l}=e,d=a.eventTimeFormat||Te;return c(oe,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",r.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>ke(r,s),seg:r,timeText:"",disableDragging:!0,disableResizing:!0}),(u,p)=>c(G,null,Me(r,d,s,i,l),c("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},c("span",{className:"fc-list-event-dot",style:{borderColor:p.borderColor||p.backgroundColor}})),c(u,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${o} ${l}`}})))}}function ke(t,e){let s=le(t,e);return c("a",Object.assign({},s),t.eventRange.def.title)}function Me(t,e,s,a,r){let{options:i}=s;if(i.displayEventTime!==!1){let o=t.eventRange.def,l=t.eventRange.instance,d=!1,u;if(o.allDay?d=!0:de(t.eventRange.range)?t.isStart?u=M(t,e,s,null,null,l.range.start,t.end):t.isEnd?u=M(t,e,s,null,null,t.start,l.range.end):d=!0:u=M(t,e,s),d){let p={text:s.options.allDayText,view:s.viewApi};return c(F,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${a} ${r}`},renderProps:p,generatorName:"allDayContent",customGenerator:i.allDayContent,defaultGenerator:Ee,classNameGenerator:i.allDayClassNames,didMount:i.allDayDidMount,willUnmount:i.allDayWillUnmount})}return c("td",{className:"fc-list-event-time"},u)}return null}function Ee(t){return t.text}class Re extends K{constructor(){super(...arguments),this.computeDateVars=L(He),this.eventStoreToSegs=L(this._eventStoreToSegs),this.state={timeHeaderId:T(),eventHeaderId:T(),dateHeaderIdRoot:T()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:s}=this,{dayDates:a,dayRanges:r}=this.computeDateVars(e.dateProfile),i=this.eventStoreToSegs(e.eventStore,e.eventUiBases,r);return c(Q,{elRef:this.setRootEl,elClasses:["fc-list",s.theme.getClass("table"),s.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:s.viewSpec},c(X,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},i.length>0?this.renderSegList(i,a):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:s}=this.context,a={text:e.noEventsText,view:s};return c(F,{elTag:"div",elClasses:["fc-list-empty"],renderProps:a,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:Fe,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},r=>c(r,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,s){let{theme:a,options:r}=this.context,{timeHeaderId:i,eventHeaderId:o,dateHeaderIdRoot:l}=this.state,d=Le(e);return c(ae,{unit:"day"},(u,p)=>{let g=[];for(let h=0;h<d.length;h+=1){let v=d[h];if(v){let x=V(s[h]),A=l+"-"+x;g.push(c(Ce,{key:x,cellId:A,dayDate:s[h],todayRange:p})),v=te(v,r.eventOrder);for(let k of v)g.push(c($e,Object.assign({key:x+":"+k.eventRange.instance.instanceId,seg:k,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:i,eventHeaderId:o,dateHeaderId:A},se(k,p,u))))}}return c("table",{className:"fc-list-table "+a.getClass("table")},c("thead",null,c("tr",null,c("th",{scope:"col",id:i},r.timeHint),c("th",{scope:"col","aria-hidden":!0}),c("th",{scope:"col",id:o},r.eventHint))),c("tbody",null,g))})}_eventStoreToSegs(e,s,a){return this.eventRangesToSegs(Z(e,s,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,a)}eventRangesToSegs(e,s){let a=[];for(let r of e)a.push(...this.eventRangeToSegs(r,s));return a}eventRangeToSegs(e,s){let{dateEnv:a}=this.context,{nextDayThreshold:r}=this.context.options,i=e.range,o=e.def.allDay,l,d,u,p=[];for(l=0;l<s.length;l+=1)if(d=ee(i,s[l]),d&&(u={component:this,eventRange:e,start:d.start,end:d.end,isStart:e.isStart&&d.start.valueOf()===i.start.valueOf(),isEnd:e.isEnd&&d.end.valueOf()===i.end.valueOf(),dayIndex:l},p.push(u),!u.isEnd&&!o&&l+1<s.length&&i.end<a.add(s[l+1].start,r))){u.end=i.end,u.isEnd=!0;break}return p}}function Fe(t){return t.text}function He(t){let e=ne(t.renderRange.start),s=t.renderRange.end,a=[],r=[];for(;e<s;)a.push(e),r.push({start:e,end:N(e,1)}),e=N(e,1);return{dayDates:a,dayRanges:r}}function Le(t){let e=[],s,a;for(s=0;s<t.length;s+=1)a=t[s],(e[a.dayIndex]||(e[a.dayIndex]=[])).push(a);return e}const Ne={listDayFormat:O,listDaySideFormat:O,noEventsClassNames:I,noEventsContent:I,noEventsDidMount:I,noEventsWillUnmount:I};function O(t){return t===!1?null:U(t)}var Pe=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';ce(Pe);var Oe=ue({name:"@fullcalendar/list",optionRefiners:Ne,views:{list:{component:Re,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});const je={name:"FullCalendarList",components:{FullCalendar:fe},data(){return{calendarOptions:{plugins:[Oe],initialView:"listWeek",weekends:!0,locale:pe,headerToolbar:{left:"",center:"",right:""},eventDidMount:t=>{if(t.event.extendedProps.status==="done"){const e=t.el.style;e.backgroundColor="#faede2",e.textDecoration="line-through";const s=t.el.getElementsByClassName("fc-list-event-dot")[0];s&&(s.style.borderColor="#f1675d")}},eventClick:t=>{this.$router.push(`/JoinDetail/id=${t.event.id}`)},events:[{title:"開會",start:new Date},{title:"打球",start:"2023-03-15T14:30:00",extendedProps:{status:"done"}}],editable:!0}}},computed:{...E($,["restructureActivitiesList"]),getMemberEvent(){const t=parseInt(this.getUserId(),10);return this.restructureActivitiesList.filter(a=>a.participantsId.includes(t)).map(a=>{var d;const i=`${new Date(a==null?void 0:a.originDate).toISOString().split("T")[0]}T${(d=a.startTime)==null?void 0:d.time}:00`,o=new Date(i).getTime()-new Date().getTime()<0?"done":"";return{title:a.title,id:a.id,start:i,borderColor:"#36D488",extendedProps:{status:o}}})}},methods:{...S($,["getActivities","getOrders"]),...S(R,["getUserId"])},watch:{getMemberEvent(t){this.calendarOptions.events=t}},mounted(){this.getActivities(),this.getOrders()}},Ue={class:"my-6"},Ve={class:"flex justify-between"},Be=n("h3",{class:"text-lg"},"本周活動",-1),Ge=n("i",{class:"pi pi-arrow-up-right ml-1"},null,-1);function ze(t,e,s,a,r,i){const o=m("RouterLink"),l=m("FullCalendar");return b(),D("div",Ue,[n("div",Ve,[Be,f(o,{to:"/Member/Calendar",class:"mt-1 flex items-center justify-end hover:text-primary-01"},{default:y(()=>[w("詳細月曆"),Ge]),_:1})]),f(l,{options:r.calendarOptions},null,8,["options"])])}const Je=C(je,[["render",ze]]),We="/JoinSport/assets/group03-5f9525a7.png",qe="/JoinSport/assets/group04-2b843bd7.png",Ye="/JoinSport/assets/group05-fa5823cb.png",Ke={name:"ActivityPanel",computed:{...E($,["availableActivities"]),filteredArray(){const t=parseInt(this.getUserId(),10);return this.availableActivities.filter(s=>s.participantsId.includes(t))},nextActivity(){return this.filteredArray.map(s=>{var o,l;const a=(o=s.date)==null?void 0:o.split("/")[0],r=(l=s.date)==null?void 0:l.split("/")[1];return{...s,month:parseInt(a,10),day:parseInt(r,10)}}).sort((s,a)=>s.originDate-a.originDate).slice(0,1)}},methods:{...S($,["getActivities","getOrders"]),...S(R,["getUserId"])},mounted(){this.getActivities(),this.getOrders(),this.getUserId()}},Xe={class:"flex flex-col gap-8 rounded-lg bg-primary-03 p-6"},Qe={class:"mb-4 flex items-center justify-between"},Ze=n("h5",null,"下一個活動",-1),et={class:"relative flex w-full items-center sm:w-1/2 md:py-4 md:pl-4"},tt=["src"],st={class:"w-full rounded-b-[10px] border-x border-b px-2 pt-2 pb-3 sm:border-0"},at={class:"mb-2 group-hover:text-primary-01"},nt={class:"flex items-center text-sm text-[#3D3D3D]"},it=n("span",{class:"material-icons mr-1 text-primary-01"}," room ",-1),rt={class:"mb-1 flex items-center text-sm text-[#3D3D3D]"},ot=n("span",{class:"material-icons mr-1 text-primary-01"}," schedule ",-1),lt={class:"text-end text-xs"},dt={class:"mb-4 flex items-center justify-between"},ct=n("h5",null,"我關注的運動",-1),ut={class:"grid grid-cols-1 gap-4 rounded-[10px] bg-white p-4 shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)] md:grid-cols-3"},ft=n("img",{class:"h-full w-full rounded-lg",src:We,alt:"favoriteSport"},null,-1),pt=n("img",{class:"h-full w-full rounded-lg",src:qe,alt:"favoriteSport"},null,-1),mt=n("img",{class:"h-full w-full rounded-lg",src:Ye,alt:"favoriteSport"},null,-1);function ht(t,e,s,a,r,i){var l;const o=m("RouterLink");return b(),D("div",Xe,[n("div",null,[n("div",Qe,[Ze,f(o,{to:"/Member/List",class:"text-sm text-[#3d3d3d] hover:text-primary-01"},{default:y(()=>[w("所有參加的活動")]),_:1})]),f(o,{to:`/JoinDetail/id=${(l=i.nextActivity[0])==null?void 0:l.id}`,class:"group flex flex-col rounded-[10px] bg-white shadow-[0_0_4px_rgba(0,0,0,0.3)] transition-all duration-100 ease-in-out hover:shadow-[0_0_10px_rgba(0,0,0,0.3)] sm:flex-row"},{default:y(()=>{var d,u,p,g,h,v,x,A;return[n("div",et,[n("img",{class:"h-full rounded",src:(d=i.nextActivity[0])==null?void 0:d.mainImg,alt:"card-img-01"},null,8,tt)]),n("div",st,[n("h5",at,_((u=i.nextActivity[0])==null?void 0:u.title),1),n("p",nt,[it,w(_((p=i.nextActivity[0])==null?void 0:p.city)+_((g=i.nextActivity[0])==null?void 0:g.district),1)]),n("p",rt,[ot,w(_((h=i.nextActivity[0])==null?void 0:h.month)+"/"+_((v=i.nextActivity[0])==null?void 0:v.day)+" "+_((x=i.nextActivity[0])==null?void 0:x.startTime.time),1)]),n("p",lt,_((A=i.nextActivity[0])==null?void 0:A.participantsId.length)+" 位參加者 ",1)])]}),_:1},8,["to"])]),n("div",null,[n("div",dt,[ct,f(o,{to:"/JoinList/Hot/1",class:"text-sm text-[#3d3d3d] hover:text-primary-01"},{default:y(()=>[w("探索更多運動")]),_:1})]),n("ul",ut,[n("li",null,[f(o,{to:"/joinList/search/text=健身&area=0&date=0&page=1",href:"#",class:"relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-['健身']"},{default:y(()=>[ft]),_:1})]),n("li",null,[f(o,{to:"/joinList/search/text=潛水&area=0&date=0&page=1",href:"#",class:"relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-['潛水']"},{default:y(()=>[pt]),_:1})]),n("li",null,[f(o,{to:"/joinList/search/text=籃球&area=0&date=0&page=1",href:"#",class:"relative col-span-1 h-[100px] hover:opacity-80 hover:after:absolute hover:after:left-1/2 hover:after:top-1/2 hover:after:-translate-x-1/2 hover:after:-translate-y-1/2 hover:after:text-xl hover:after:text-white hover:after:content-['籃球']"},{default:y(()=>[mt]),_:1})])])])])}const vt=C(Ke,[["render",ht]]);const gt={name:"MemberView",components:{FrontHeader:z,MemberPanel:we,PanelMenu:Ae,FullCalendarList:Je,ActivityPanel:vt},data(){return{visible:!1}}},_t=t=>(q("data-v-72fb9b89"),t=t(),Y(),t),yt={class:"pb-20 pt-[120px]"},bt={class:"container"},xt={class:"grid-cols-12 md:grid"},wt={class:"col-span-4 hidden md:block"},Dt={class:"flex flex-col gap-4"},St={class:"col-span-4 md:block"},At={class:"flex flex-col gap-4"},Ct={class:"col-span-7 col-end-13"},It=_t(()=>n("i",{class:"pi pi-angle-double-right"},null,-1)),Tt=[It];function $t(t,e,s,a,r,i){const o=m("FrontHeader"),l=m("MemberPanel"),d=m("PanelMenu"),u=m("ActivityPanel"),p=m("FullCalendarList"),g=m("PSidebar"),h=m("RouterView");return b(),D(j,null,[f(o),n("main",yt,[n("div",bt,[n("div",xt,[n("div",wt,[n("div",Dt,[f(l),f(d),f(u),f(p)])]),f(g,{visible:r.visible,"onUpdate:visible":e[0]||(e[0]=v=>r.visible=v),class:"md:hidden"},{default:y(()=>[n("div",St,[n("div",At,[f(l),f(d),f(u),f(p)])])]),_:1},8,["visible"]),n("div",Ct,[f(h)])])]),n("button",{onClick:e[1]||(e[1]=v=>r.visible=!0),class:"fixed left-0 bottom-20 z-50 bg-primary-01 px-3 py-2 md:hidden"},Tt)])],64)}const Lt=C(gt,[["render",$t],["__scopeId","data-v-72fb9b89"]]);export{Lt as default};
