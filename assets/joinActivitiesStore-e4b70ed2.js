import{H as p,I as c}from"./index-1031d0a2.js";const{VITE_URL:n}={VITE_URL:"https://vercel.com/key0329/join-sport-server-vercel",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},h=p("joinActivities",{state:()=>({activitiesList:[],orders:[],currentPage:1,pageLimit:6}),getters:{restructureActivitiesList(){const t=[];return this.activitiesList.forEach(i=>{const a=i.id,e=i.date.split("-"),r=`${e[1]}/${e[2]}`;t[a-1]={...i,date:r,participants:[],numParticipants:0,participantsId:[],originDate:i.date}}),this.orders.forEach(({user:i,activity:a})=>{const e=a.id,{img:r}=i,{id:o}=i;t[e-1]=t[e-1]||{participants:[],participantsId:[]},t[e-1].participants.push(r),t[e-1].numParticipants=t[e-1].participants.length,t[e-1].participantsId.push(o)}),t.map(i=>({...i,participants:i.participants.slice(0,3)}))}},actions:{getActivities(){const t=`${n}/activities`;c.get(t).then(s=>{this.activitiesList=s.data}).catch(s=>{console.log(s),alert("err")})},getOrders(){const t=`${n}/orders?isCancelled=false&_expand=activity&_expand=user`;c.get(t).then(s=>{this.orders=s.data}).catch(s=>{console.log(s),alert("err")})},changePage(t=1){this.currentPage=t},arrangePage(t){const s=(this.currentPage-1)*this.pageLimit,i=this.currentPage*this.pageLimit,a=t.slice(s,i),e=Math.ceil(this.restructureActivitiesList.length/this.pageLimit);return{list:a,pageTotal:e}}}});export{h as j};
