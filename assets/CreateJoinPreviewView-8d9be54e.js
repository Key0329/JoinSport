import{_ as g,r as c,o as b,H as P,w as _,d as n,b as t,a as S,C as i,t as $,e as w,F as V,u as C,D as E,E as j}from"./index-0bad7370.js";import{S as k}from"./StepPagination-bf404a51.js";import{J as B,a as O}from"./JoinAttendees-814d4826.js";import"./createStepsStore-611563b8.js";import"./LeafletMap-b1cfa321.js";import"./activitiesStore-f5b33199.js";import"./leaflet-src-afaa424b.js";const U="/JoinSport/assets/activity1501-cc44200c.jpg",L="/JoinSport/assets/activity1502-fecf73f6.jpg",M="/JoinSport/assets/activity1503-c2380af1.jpg",N={components:{JoinAttendees:B}},R={class:"flex flex-wrap gap-4"},K=t("div",{class:"flex flex-col justify-evenly gap-2 md:flex-row"},[t("div",{class:"w-full"},[t("img",{src:U,alt:"JoinDetailImg",class:"h-full"})]),t("div",{class:"w-full"},[t("img",{src:L,alt:"JoinDetailImg",class:"h-full"})]),t("div",{class:"w-full"},[t("img",{src:M,alt:"JoinDetailImg",class:"h-full"})])],-1),z=t("p",{class:"mb-4"},"留言",-1),H=t("div",{class:"flex justify-end gap-4"},[t("button",{type:"button",class:"btn transition-color bg-white disabled:opacity-50",disabled:""}," 取消 "),t("button",{type:"button",class:"btn transition-color bg-primary-04 disabled:opacity-50",disabled:""}," 確認 ")],-1);function Y(s,a,o,r,e,p){const l=c("JoinAttendees"),m=c("TabPanel"),h=c("PTextarea"),u=c("TabView");return b(),P(u,null,{default:_(()=>[n(m,{header:"參與者"},{default:_(()=>[t("ul",R,[t("li",null,[n(l)]),t("li",null,[n(l)]),t("li",null,[n(l)])])]),_:1}),n(m,{header:"更多照片"},{default:_(()=>[K]),_:1}),n(m,{header:"留言"},{default:_(()=>[t("div",null,[z,t("form",null,[n(h,{rows:"5",class:"mb-2 w-full",placeholder:"留下您的想法",disabled:""}),H])])]),_:1})]),_:1})}const W=g(N,[["render",Y]]),Q={props:{tempForm:{type:Object}}},X={class:"flex flex-col items-center md:flex-row md:justify-between"},G={class:"mb-2 md:mb-0"},Z={class:"mb-2 md:mb-0"},q={class:"text-lg font-semibold sm:text-xl"},tt={class:"flex items-center gap-6"},et=t("p",null,[t("i",{class:"pi pi-star text-lg"})],-1),st=t("button",{type:"button",class:"btn btn-primary py-4 hover:bg-primary-01 hover:text-white disabled:opacity-70",disabled:""}," 我要參加 ",-1);function ot(s,a,o,r,e,p){var l,m;return b(),S("div",X,[t("div",G,[t("p",Z,i(o.tempForm.newDate)+" "+i(o.tempForm.dayOfWeekText)+" "+i((l=o.tempForm.startTime)==null?void 0:l.time),1),t("h2",q,i(o.tempForm.title),1)]),t("div",tt,[t("p",null,i((m=o.tempForm.maxJoinNum)==null?void 0:m.number)+" 個空位",1),et,st])])}const it=g(Q,[["render",ot]]),at="/JoinSport/assets/activity15-e1a908b3.jpg";const{VITE_URL:J,VITE_MAP_KEY:nt,VITE_MAP_URL:ct}={VITE_URL:"https://joinsport-server-render.onrender.com",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",VITE_MAP_KEY:"AIzaSyAScKOJBsEFvLrg4YGx5ticXsBzFYZPATw",VITE_MAP_URL:"https://maps.googleapis.com/maps/api/geocode/json",BASE_URL:"/JoinSport/",MODE:"production",DEV:!1,PROD:!0},rt={name:"CreateJoinPreviewView",components:{StepPagination:k,JoinDetailAside:O,CreateJoinTabView:W,CreateJoinBottomArea:it},data(){return{user:{},userId:null,tempForm:{},tempTags:[],editorContent:"",location:[]}},computed:{tempActivity(){var a,o,r,e;return{...this.tempForm,userId:this.userId,city:(a=this.tempForm.city)==null?void 0:a.name,district:(o=this.tempForm.district)==null?void 0:o.name,tags:this.tempTags,mainImg:"https://github.com/Key0329/JoinSport/blob/main/src/assets/images/activities/activity15.jpg?raw=true",imgs:["https://github.com/Key0329/JoinSport/blob/main/src/assets/images/activities/activity1501.jpg?raw=true","https://github.com/Key0329/JoinSport/blob/main/src/assets/images/activities/activity1502.jpg?raw=true","https://github.com/Key0329/JoinSport/blob/main/src/assets/images/activities/activity1503.jpg?raw=true"],content:this.editorContent,maxJoinNum:(r=this.tempForm.maxJoinNum)==null?void 0:r.number,cost:this.tempForm.costPerPerson,paymentMethod:(e=this.tempForm.paymentMethod)==null?void 0:e.method,groupId:"",updateDate:new Date().getTime(),isCancelled:!1,location:this.location}}},methods:{...$(C,["getUserId"]),getLocalData(){if(localStorage.getItem("createTempFormData")){const s=JSON.parse(localStorage.getItem("createTempFormData")),a=s.date.split("-"),o=`${a[1]}/${a[2]}`,r=new Date(s.date).getDay(),e=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][r];this.tempForm={...s,newDate:o,dayOfWeekText:e}}if(localStorage.getItem("editorValue")){const s=localStorage.getItem("editorValue");this.editorContent=s}if(localStorage.getItem("selectedTags")){const s=JSON.parse(localStorage.getItem("selectedTags"));this.tempTags=s}},getUser(){const s=this.userId,a=`${J}/users/${s}`;this.$http.get(a).then(o=>{this.user=o.data}).catch(o=>{const r=o.response.statusText;this.$toast.add({severity:"error",detail:`${r} 使用者資訊獲取失敗`,life:3e3,contentStyleClass:"custom-toast-danger"})})},async handleSubmit(){try{const s=`${this.tempForm.city.name}${this.tempForm.district.name}${this.tempForm.address}`,a=`${ct}?address=${s}&key=${nt}`,o=`${J}/activities`,e=(await this.$http.get(a)).data.results[0].geometry.location;this.location=[e.lat,e.lng];const p=this.tempActivity;await this.$http.post(o,p),this.$router.push("/CreateJoin/step5"),["createTempFormData","editorValue","selectedTags"].forEach(m=>localStorage.removeItem(m))}catch{this.$toast.add({severity:"error",detail:"開團失敗，因定位需求，請檢查地址格式是否正確",life:3e3,contentStyleClass:"custom-toast-danger"})}}},mounted(){this.getLocalData(),this.userId=this.getUserId(),this.getUser()}},d=s=>(E("data-v-9edc9576"),s=s(),j(),s),mt={class:"px-4 pt-6 pb-5 md:pt-20"},lt={class:"container"},dt={class:"flex items-center"},pt={class:"mb-4 mr-4 text-xl font-bold md:text-3xl"},_t={class:"items-end"},ht={class:"flex items-center gap-4"},ut=d(()=>t("p",null,"主辦者",-1)),gt={class:"bg-primary-03 px-4 py-10 md:py-20"},bt={class:"container"},yt={class:"grid h-full grid-cols-12 border-b border-[#3d3d3d] pb-10 md:pb-20"},ft={class:"col-span-12 md:col-span-8"},xt=d(()=>t("img",{src:at,alt:"JoinDetailImage",class:"rounded md:mb-10"},null,-1)),vt={class:"mb-4 flex items-center justify-between border-b md:mb-0 md:hidden md:border-0"},Tt=d(()=>t("h3",{class:"whitespace-nowrap text-lg font-medium md:mb-8 md:text-xl"}," 揪團詳情 ",-1)),wt={class:"p-4"},Jt={class:"flex items-center rounded-full py-1 px-2 text-sm text-[#3D3D3D]"},St=d(()=>t("span",{class:"material-icons mr-1 text-primary-01"}," schedule ",-1)),Ft={class:"flex items-center rounded-full py-1 px-2 text-sm text-[#3D3D3D]"},It=d(()=>t("span",{class:"material-icons mr-1 text-primary-01"}," room ",-1)),Dt={class:"mb-10 md:mb-20"},At={class:"mb-10 flex justify-evenly border-y border-[#3d3d3d] py-6 md:mb-20 md:py-10"},Pt={class:"text-center"},$t=d(()=>t("span",{class:"material-symbols-outlined md:text-4xl"}," credit_card ",-1)),Vt={class:"text-center"},Ct=d(()=>t("span",{class:"material-symbols-outlined md:text-4xl"}," monetization_on ",-1)),Et={class:"text-center"},jt=d(()=>t("span",{class:"material-symbols-outlined md:text-4xl"}," group ",-1)),kt={class:"bg-white py-5"},Bt={class:"container"};function Ot(s,a,o,r,e,p){var y,f,x,v,T;const l=c("PToast"),m=c("PAvatar"),h=c("QuillEditor"),u=c("CreateJoinTabView"),F=c("JoinDetailAside"),I=c("CreateJoinBottomArea"),D=c("StepPagination");return b(),S(V,null,[n(l),t("section",mt,[t("div",lt,[t("div",dt,[t("h2",pt,i(e.tempForm.title),1),t("p",_t,i((y=e.tempForm.city)==null?void 0:y.name)+" "+i((f=e.tempForm.district)==null?void 0:f.name),1)]),t("div",ht,[n(m,{image:e.user.img,size:"xlarge",shape:"circle"},null,8,["image"]),t("div",null,[ut,t("p",null,i(e.user.name),1)])])])]),t("main",gt,[t("div",bt,[t("div",yt,[t("div",ft,[xt,t("section",vt,[Tt,t("div",wt,[t("p",Jt,[St,w(i(e.tempForm.newDate)+" "+i((x=e.tempForm.startTime)==null?void 0:x.time),1)]),t("p",Ft,[It,w(i(e.tempForm.address),1)])])]),t("article",Dt,[n(h,{content:e.editorContent,"onUpdate:content":a[0]||(a[0]=A=>e.editorContent=A),contentType:"html",readOnly:"",theme:"bubble"},null,8,["content"])]),t("section",At,[t("div",Pt,[$t,t("p",null,i((v=e.tempForm.paymentMethod)==null?void 0:v.method),1)]),t("div",Vt,[Ct,t("p",null,"$ "+i(e.tempForm.costPerPerson),1)]),t("div",Et,[jt,t("p",null,i((T=e.tempForm.maxJoinNum)==null?void 0:T.number)+" 人",1)])]),n(u)]),n(F,{activity:p.tempActivity},null,8,["activity"])])])]),t("section",kt,[t("div",Bt,[n(I,{"temp-form":e.tempForm},null,8,["temp-form"])])]),n(D,{onHandleSubmit:p.handleSubmit,class:"mt-10 md:mt-20"},null,8,["onHandleSubmit"])],64)}const Ht=g(rt,[["render",Ot],["__scopeId","data-v-9edc9576"]]);export{Ht as default};
